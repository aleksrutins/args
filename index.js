module.exports=s=>(f={},t="",p=t=>"true"==t||"false"!=t&&(+t||t),s=s.join` `,[s,...r]=s.split(/(^| )--($| )/),e=r.map(t=>t.trim()).filter(t=>t).flatMap(t=>t.split` `),s=s[R="replace"](/--([^= ]+?) ([^-][^ ]*)/gm,(s,e,m)=>(f[e]=p(m),t))[R](/--([^= ]+?)=([^ ]*)/gm,(s,e,m)=>(f[e]=p(m),t))[R](/--?([A-z]+?)=( |$)/gm,(s,e)=>f[e]=t)[R](/--no-([^= ]+)/gm,(s,e)=>(f[e]=!1,t))[R](/--([^= ]+)/gm,(s,e)=>(f[e]=!0,t))[R](/-([^= ]+?)[ =]([^- ][^ ]*)/gm,(s,e,m)=>(f[e]=p(m),t))[R](/-([A-z]+)\b/gm,(s,e)=>([...e].map(t=>f[t]=!0),t))[R](/-([A-z])(\d[^ =]*)/gm,(s,e,m)=>(f[e]=p(m),t)),{flags:f,_:s.split` `.filter(t=>t),extras:e})
